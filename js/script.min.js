const emailRegExp=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,nameRegExp=/[а-яА-Я]{2,}/,phoneRegExp=/^\+?[78][-\(]?\d{3}\)?-?\d{3}-?\d{2}-?\d{2}$/,emailInput=document.getElementsByName("senderEmail")[0],nameInput=document.getElementsByName("senderName")[0],phoneInput=document.getElementsByName("senderPhone")[0],sendForm=document.getElementsByClassName("sendMessage")[0];let borderColor=emailInput.style.borderColor,flags={name:!1,email:!1};function testRegExp(regExp,element,flagName=null){regExp.test(element.value)||""==element.value?(element.style.borderColor=borderColor,null!=flagName&&(flags[flagName]=!0)):(element.style.borderColor="red",null!=flagName&&(flags[flagName]=!1))}async function isEmailExist(){let data=new FormData;data.set("emailSearch",emailInput.value);let response=await fetch("vendor/functions.php",{method:"POST",body:data}),result;await response.text()?console.log("Correct"):console.log("Incorrect")}emailInput.addEventListener("input",(function(){testRegExp(emailRegExp,emailInput,"email"),isEmailExist()})),nameInput.addEventListener("input",(function(){testRegExp(nameRegExp,nameInput,"name")})),phoneInput.addEventListener("input",(function(){testRegExp(phoneRegExp,phoneInput)})),sendForm.addEventListener("submit",(function(event){for(const key in flags)if(!flags[key]){event.preventDefault(),alert("Заполните все поля правильно");break}}));